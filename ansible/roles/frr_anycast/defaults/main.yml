# SPDX-License-Identifier: Apache-2.0
# frr_anycast - Default variables for BGP anycast with FRR
---
# Anycast VIP configuration
frr_anycast_vip: "10.255.255.1"
frr_anycast_vip_prefix: 32
frr_anycast_loopback: "lo:1"

# BGP configuration
frr_bgp_asn: 65000                    # Private ASN for TACACS+ anycast
frr_bgp_router_id: "{{ ansible_host }}"
frr_bgp_neighbors: []
# Example:
# frr_bgp_neighbors:
#   - address: 10.0.0.1              # Core router 1
#     remote_asn: 65100
#     description: "Core-Router-1"
#     password: ""                    # Optional MD5 password
#   - address: 10.0.0.2              # Core router 2
#     remote_asn: 65100
#     description: "Core-Router-2"

# BGP timers
frr_bgp_keepalive: 10                 # seconds
frr_bgp_holdtime: 30                  # seconds
frr_bgp_connect_retry: 10             # seconds

# BGP communities for traffic engineering
frr_bgp_community_healthy: "65000:100"
frr_bgp_community_draining: "65000:50"  # Lower preference during maintenance
frr_bgp_community_location: ""          # Set per-location, e.g., "65000:1001" for NYC01

# BFD (Bidirectional Forwarding Detection) for fast failover
frr_bfd_enabled: true
frr_bfd_min_rx: 300                   # ms
frr_bfd_min_tx: 300                   # ms
frr_bfd_detect_multiplier: 3

# Health check configuration
frr_health_check_enabled: true
frr_health_check_url: "http://127.0.0.1:8080/ready"
frr_health_check_interval: 5          # seconds
frr_health_check_timeout: 3           # seconds
frr_health_check_failures: 2          # failures before withdrawing route

# Route-map configuration
frr_route_map_name: "TACACS-ANYCAST"

# Prefix-list configuration
frr_prefix_list_name: "TACACS-VIP"

# Graceful shutdown
frr_graceful_shutdown_community: "65535:0"  # GRACEFUL_SHUTDOWN well-known community

# Logging
frr_log_level: informational
frr_log_file: /var/log/frr/frr.log

# User/group
frr_user: frr
frr_group: frr

# Directories
frr_conf_dir: /etc/frr

# Firewall
frr_configure_firewall: true

# Daemons to enable
frr_daemons:
  zebra: true
  bgpd: true
  bfdd: "{{ frr_bfd_enabled }}"
  staticd: true

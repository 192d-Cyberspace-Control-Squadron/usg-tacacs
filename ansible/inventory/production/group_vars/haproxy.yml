# SPDX-License-Identifier: Apache-2.0
# HAProxy configuration for TACACS+ load balancing
---
# Stats interface credentials (CHANGE THESE IN PRODUCTION)
tacacs_ha_stats_user: admin
tacacs_ha_stats_password: "{{ vault_haproxy_stats_password }}"

# Load balancing algorithm
# - roundrobin: distribute evenly across all servers
# - leastconn: prefer servers with fewer connections
# - source: sticky sessions based on client IP
tacacs_ha_balance_algorithm: roundrobin

# Health check settings
tacacs_ha_health_check_enabled: true
tacacs_ha_health_check_uri: /ready
tacacs_ha_health_check_port: 8080
tacacs_ha_health_check_interval: 2000
tacacs_ha_health_check_rise: 2
tacacs_ha_health_check_fall: 3

# Connection limits
tacacs_ha_maxconn_global: 4096
tacacs_ha_maxconn_frontend: 2048
tacacs_ha_maxconn_server: 256

# Timeouts
tacacs_ha_timeout_connect: 5s
tacacs_ha_timeout_client: 60s
tacacs_ha_timeout_server: 60s

# Backend TACACS+ servers
# Define per-location in host_vars or override per group
tacacs_ha_backends: []
# Example for a location with 2 servers:
# tacacs_ha_backends:
#   - name: tacacs01-nyc01
#     address: 10.10.1.11
#     weight: 100
#   - name: tacacs02-nyc01
#     address: 10.10.1.12
#     weight: 100
#     backup: false

# Session persistence (optional)
# Enable for network devices that require same server for session
tacacs_ha_stick_table_enabled: false
tacacs_ha_stick_table_size: 100k
tacacs_ha_stick_table_expire: 30m
